<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Master - Fun Brain Training Games</title>
    <!-- 引入必要的样式和脚本 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 样式保持与原版一致 */
    </style>
</head>
<body class="text-gray-800">
    <header>
        <!-- Header 部分保持不变 -->
    </header>

    <section id="game-area">
        <!-- 游戏区域，保持与原版一致 -->
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', function () {
                const isExpanded = mobileMenu.classList.contains('hidden');
                mobileMenu.classList.toggle('hidden');
                mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
            });

            // 游戏逻辑模块化
            const gameModule = (() => {
                let currentGame = null;
                let currentLevel = 1;
                let currentScore = 0;
                let currentSequence = [];
                let userInput = [];

                const gameConfigs = {
                    number: {
                        title: "Number Memory Challenge",
                        instructions: "Memorize the sequence of numbers shown, then repeat it correctly.",
                        generateSequence(level) {
                            return Array.from({ length: level + 2 }, () => Math.floor(Math.random() * 10));
                        },
                        displayItem(item) {
                            return item.toString();
                        },
                        inputOptions: Array.from({ length: 10 }, (_, i) => i),
                    },
                    // 其他游戏逻辑保持一致
                };

                const startGame = (gameType) => {
                    currentGame = gameType;
                    currentLevel = 1;
                    currentScore = 0;

                    // 更新 UI，隐藏其他区域
                    document.getElementById('games').classList.add('hidden');
                    document.getElementById('game-area').classList.remove('hidden');

                    const config = gameConfigs[gameType];
                    document.getElementById('game-title').textContent = config.title;
                    document.getElementById('instructions-text').textContent = config.instructions;

                    startRound();
                };

                const startRound = () => {
                    const config = gameConfigs[currentGame];
                    currentSequence = config.generateSequence(currentLevel);
                    userInput = [];

                    // 渲染提示序列
                    const sequenceDisplay = document.getElementById('sequence-content');
                    sequenceDisplay.innerHTML = currentSequence
                        .map(item => `<span>${config.displayItem(item)}</span>`)
                        .join('');

                    // 显示序列后隐藏并开始用户输入
                    setTimeout(() => {
                        sequenceDisplay.innerHTML = '';
                        setupUserInput(config);
                    }, currentSequence.length * 1000);
                };

                const setupUserInput = (config) => {
                    const inputArea = document.getElementById('input-tiles');
                    inputArea.innerHTML = config.inputOptions
                        .map(
                            item => `<button class="memory-tile">${config.displayItem(item)}</button>`
                        )
                        .join('');
                    document.querySelectorAll('.memory-tile').forEach((button, index) => {
                        button.addEventListener('click', () => {
                            userInput.push(config.inputOptions[index]);
                            validateInput();
                        });
                    });
                };

                const validateInput = () => {
                    if (userInput.length === currentSequence.length) {
                        const isCorrect = userInput.every((val, idx) => val === currentSequence[idx]);
                        showResult(isCorrect);
                    }
                };

                const showResult = (isCorrect) => {
                    const resultDisplay = document.getElementById('result-display');
                    resultDisplay.textContent = isCorrect
                        ? 'Correct! Proceeding to the next level.'
                        : 'Incorrect! Try again.';
                    if (isCorrect) {
                        currentLevel++;
                        currentScore += currentLevel * 10;
                        startRound();
                    }
                };

                return {
                    startGame,
                };
            })();

            // 绑定事件
            document.getElementById('start-game-btn').addEventListener('click', () => {
                gameModule.startGame('number');
            });
        });
    </script>
</body>
</html>


